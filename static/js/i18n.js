/**
 * QuickType Pro - Ã‡oklu Dil DesteÄŸi (i18n) - Mobil Versiyon
 * Desteklenen diller: Ä°ngilizce, TÃ¼rkÃ§e, Almanca, FransÄ±zca, Ä°spanyolca
 */

const translations = {
    en: {
        code: 'en',
        name: 'English',
        flag: 'ðŸ‡¬ðŸ‡§',
        translations: {
            // App
            appName: 'QuickType Pro',
            mobileControlCenter: 'Mobile Control Center',

            // Status
            status: 'Status',
            connected: 'Connected',
            disconnected: 'Disconnected',

            // Keyboard view
            keyboard: 'Keyboard',
            clipboard: 'Clipboard',
            touchHereToType: 'Touch here and start typing...',
            mouseControl: 'Mouse Control',
            otherKeys: 'Other Keys',

            // Actions
            selectAll: 'Select All',
            copy: 'Copy',
            paste: 'Paste',
            cut: 'Cut',
            undo: 'Undo',
            redo: 'Redo',

            // Clipboard view
            clipboardManagement: 'Clipboard',
            twoWaySync: 'Two-way synchronization',
            off: 'Off',
            on: 'On',
            addTextOrPaste: 'Add text or paste...',
            showAsPopup: 'Show as popup',
            saveToArchive: 'Save to archive',
            tapToUploadFile: 'Tap to upload file',
            imagesPdfEtc: 'Images, PDF, etc.',
            fromPhone: 'From Phone',
            fromPC: 'From PC',
            noItemsYet: 'No items yet',
            addTextOrFile: 'Add text or file',
            clearAll: 'Clear All',

            // Popup
            sharedContent: 'Shared Content',
            download: 'Download',

            // Misc
            refresh: 'Refresh'
        }
    },
    tr: {
        code: 'tr',
        name: 'TÃ¼rkÃ§e',
        flag: 'ðŸ‡¹ðŸ‡·',
        translations: {
            // App
            appName: 'QuickType Pro',
            mobileControlCenter: 'Mobil Kontrol Merkezi',

            // Status
            status: 'Durum',
            connected: 'BaÄŸlandÄ±',
            disconnected: 'BaÄŸlantÄ± Kesildi',

            // Keyboard view
            keyboard: 'Klavye',
            clipboard: 'Pano',
            touchHereToType: 'Buraya dokun ve yazmaya baÅŸla...',
            mouseControl: 'Mouse KontrolÃ¼',
            otherKeys: 'DiÄŸer TuÅŸlar',

            // Actions
            selectAll: 'TÃ¼mÃ¼ SeÃ§',
            copy: 'Kopyala',
            paste: 'YapÄ±ÅŸtÄ±r',
            cut: 'Kes',
            undo: 'Geri Al',
            redo: 'Ä°leri Al',

            // Clipboard view
            clipboardManagement: 'Pano',
            twoWaySync: 'Ä°ki yÃ¶nlÃ¼ senkronizasyon',
            off: 'KapalÄ±',
            on: 'AÃ§Ä±k',
            addTextOrPaste: 'Metin ekle veya yapÄ±ÅŸtÄ±r...',
            showAsPopup: 'Pop-up olarak gÃ¶ster',
            saveToArchive: 'ArÅŸive kaydet',
            tapToUploadFile: 'Dosya yÃ¼klemek iÃ§in dokun',
            imagesPdfEtc: 'Resim, PDF, vb.',
            fromPhone: 'Telefondan',
            fromPC: 'PC\'den',
            noItemsYet: 'HenÃ¼z bir Ã¶ÄŸe yok',
            addTextOrFile: 'Metin veya dosya ekleyin',
            clearAll: 'TÃ¼mÃ¼nÃ¼ Temizle',

            // Popup
            sharedContent: 'PaylaÅŸÄ±lan Ä°Ã§erik',
            download: 'Ä°ndir',

            // Misc
            refresh: 'Yenile'
        }
    },
    de: {
        code: 'de',
        name: 'Deutsch',
        flag: 'ðŸ‡©ðŸ‡ª',
        translations: {
            // App
            appName: 'QuickType Pro',
            mobileControlCenter: 'Mobile Steuerzentrale',

            // Status
            status: 'Status',
            connected: 'Verbunden',
            disconnected: 'Getrennt',

            // Keyboard view
            keyboard: 'Tastatur',
            clipboard: 'Zwischenablage',
            touchHereToType: 'Hier tippen und schreiben...',
            mouseControl: 'Maussteuerung',
            otherKeys: 'Weitere Tasten',

            // Actions
            selectAll: 'Alles auswÃ¤hlen',
            copy: 'Kopieren',
            paste: 'EinfÃ¼gen',
            cut: 'Ausschneiden',
            undo: 'RÃ¼ckgÃ¤ngig',
            redo: 'Wiederholen',

            // Clipboard view
            clipboardManagement: 'Zwischenablage',
            twoWaySync: 'Bidirektionale Synchronisierung',
            off: 'Aus',
            on: 'An',
            addTextOrPaste: 'Text hinzufÃ¼gen oder einfÃ¼gen...',
            showAsPopup: 'Als Popup anzeigen',
            saveToArchive: 'Im Archiv speichern',
            tapToUploadFile: 'Zum Hochladen tippen',
            imagesPdfEtc: 'Bilder, PDF, usw.',
            fromPhone: 'Vom Telefon',
            fromPC: 'Vom PC',
            noItemsYet: 'Noch keine Elemente',
            addTextOrFile: 'Text oder Datei hinzufÃ¼gen',
            clearAll: 'Alle lÃ¶schen',

            // Popup
            sharedContent: 'Geteilter Inhalt',
            download: 'Herunterladen',

            // Misc
            refresh: 'Aktualisieren'
        }
    },
    fr: {
        code: 'fr',
        name: 'FranÃ§ais',
        flag: 'ðŸ‡«ðŸ‡·',
        translations: {
            // App
            appName: 'QuickType Pro',
            mobileControlCenter: 'Centre de contrÃ´le mobile',

            // Status
            status: 'Statut',
            connected: 'ConnectÃ©',
            disconnected: 'DÃ©connectÃ©',

            // Keyboard view
            keyboard: 'Clavier',
            clipboard: 'Presse-papiers',
            touchHereToType: 'Touchez ici pour taper...',
            mouseControl: 'ContrÃ´le souris',
            otherKeys: 'Autres touches',

            // Actions
            selectAll: 'Tout sÃ©lectionner',
            copy: 'Copier',
            paste: 'Coller',
            cut: 'Couper',
            undo: 'Annuler',
            redo: 'RÃ©tablir',

            // Clipboard view
            clipboardManagement: 'Presse-papiers',
            twoWaySync: 'Synchronisation bidirectionnelle',
            off: 'DÃ©sactivÃ©',
            on: 'ActivÃ©',
            addTextOrPaste: 'Ajouter du texte ou coller...',
            showAsPopup: 'Afficher en popup',
            saveToArchive: 'Enregistrer dans l\'archive',
            tapToUploadFile: 'Appuyez pour tÃ©lÃ©charger',
            imagesPdfEtc: 'Images, PDF, etc.',
            fromPhone: 'Du tÃ©lÃ©phone',
            fromPC: 'Du PC',
            noItemsYet: 'Aucun Ã©lÃ©ment',
            addTextOrFile: 'Ajouter du texte ou un fichier',
            clearAll: 'Tout effacer',

            // Popup
            sharedContent: 'Contenu partagÃ©',
            download: 'TÃ©lÃ©charger',

            // Misc
            refresh: 'Actualiser'
        }
    },
    es: {
        code: 'es',
        name: 'EspaÃ±ol',
        flag: 'ðŸ‡ªðŸ‡¸',
        translations: {
            // App
            appName: 'QuickType Pro',
            mobileControlCenter: 'Centro de control mÃ³vil',

            // Status
            status: 'Estado',
            connected: 'Conectado',
            disconnected: 'Desconectado',

            // Keyboard view
            keyboard: 'Teclado',
            clipboard: 'Portapapeles',
            touchHereToType: 'Toca aquÃ­ para escribir...',
            mouseControl: 'Control del ratÃ³n',
            otherKeys: 'Otras teclas',

            // Actions
            selectAll: 'Seleccionar todo',
            copy: 'Copiar',
            paste: 'Pegar',
            cut: 'Cortar',
            undo: 'Deshacer',
            redo: 'Rehacer',

            // Clipboard view
            clipboardManagement: 'Portapapeles',
            twoWaySync: 'SincronizaciÃ³n bidireccional',
            off: 'Desactivado',
            on: 'Activado',
            addTextOrPaste: 'Agregar texto o pegar...',
            showAsPopup: 'Mostrar como popup',
            saveToArchive: 'Guardar en archivo',
            tapToUploadFile: 'Toca para subir archivo',
            imagesPdfEtc: 'ImÃ¡genes, PDF, etc.',
            fromPhone: 'Del telÃ©fono',
            fromPC: 'Del PC',
            noItemsYet: 'No hay elementos',
            addTextOrFile: 'Agregar texto o archivo',
            clearAll: 'Borrar todo',

            // Popup
            sharedContent: 'Contenido compartido',
            download: 'Descargar',

            // Misc
            refresh: 'Actualizar'
        }
    },
    zh: {
        code: 'zh',
        name: 'ä¸­æ–‡',
        flag: 'ðŸ‡¨ðŸ‡³',
        translations: {
            // App
            appName: 'QuickType Pro',
            mobileControlCenter: 'ç§»åŠ¨æŽ§åˆ¶ä¸­å¿ƒ',

            // Status
            status: 'çŠ¶æ€',
            connected: 'å·²è¿žæŽ¥',
            disconnected: 'å·²æ–­å¼€',

            // Keyboard view
            keyboard: 'é”®ç›˜',
            clipboard: 'å‰ªè´´æ¿',
            touchHereToType: 'ç‚¹å‡»æ­¤å¤„å¼€å§‹è¾“å…¥...',
            mouseControl: 'é¼ æ ‡æŽ§åˆ¶',
            otherKeys: 'å…¶ä»–æŒ‰é”®',

            // Actions
            selectAll: 'å…¨é€‰',
            copy: 'å¤åˆ¶',
            paste: 'ç²˜è´´',
            cut: 'å‰ªåˆ‡',
            undo: 'æ’¤é”€',
            redo: 'é‡åš',

            // Clipboard view
            clipboardManagement: 'å‰ªè´´æ¿',
            twoWaySync: 'åŒå‘åŒæ­¥',
            off: 'å…³é—­',
            on: 'å¼€å¯',
            addTextOrPaste: 'æ·»åŠ æ–‡æœ¬æˆ–ç²˜è´´...',
            showAsPopup: 'æ˜¾ç¤ºä¸ºå¼¹çª—',
            saveToArchive: 'ä¿å­˜åˆ°å­˜æ¡£',
            tapToUploadFile: 'ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶',
            imagesPdfEtc: 'å›¾ç‰‡ã€PDFç­‰',
            fromPhone: 'æ¥è‡ªæ‰‹æœº',
            fromPC: 'æ¥è‡ªç”µè„‘',
            noItemsYet: 'æš‚æ— é¡¹ç›®',
            addTextOrFile: 'æ·»åŠ æ–‡æœ¬æˆ–æ–‡ä»¶',
            clearAll: 'æ¸…é™¤å…¨éƒ¨',

            // Popup
            sharedContent: 'å…±äº«å†…å®¹',
            download: 'ä¸‹è½½',

            // Misc
            refresh: 'åˆ·æ–°'
        }
    }
};

// VarsayÄ±lan dil
const defaultLanguage = 'en';

// Mevcut dil (localStorage'dan yÃ¼kle veya varsayÄ±lan kullan)
let currentLanguage = localStorage.getItem('quicktype_language') || defaultLanguage;

/**
 * Ã‡eviri fonksiyonu
 * @param {string} key - Ã‡eviri anahtarÄ±
 * @param {string} lang - Dil kodu (opsiyonel, varsayÄ±lan: mevcut dil)
 * @returns {string} - Ã‡evrilmiÅŸ metin
 */
export function t(key, lang = currentLanguage) {
    const language = translations[lang] || translations[defaultLanguage];
    return language.translations[key] || translations[defaultLanguage].translations[key] || key;
}

/**
 * Mevcut dili deÄŸiÅŸtir
 * @param {string} langCode - Yeni dil kodu
 */
export function setLanguage(langCode) {
    if (translations[langCode]) {
        currentLanguage = langCode;
        localStorage.setItem('quicktype_language', langCode);
        return true;
    }
    return false;
}

/**
 * Mevcut dili getir
 * @returns {string} - Mevcut dil kodu
 */
export function getLanguage() {
    return currentLanguage;
}

/**
 * Desteklenen dillerin listesini getir
 * @returns {Array} - Desteklenen diller
 */
export function getSupportedLanguages() {
    return Object.keys(translations).map(code => ({
        code,
        name: translations[code].name,
        flag: translations[code].flag
    }));
}

/**
 * Sayfa iÃ§eriÄŸini gÃ¼ncelle (DOM elementlerini Ã§evir)
 */
export function updatePageContent() {
    const lang = currentLanguage;

    // Header
    const headerTitle = document.querySelector('.text-2xl.font-semibold');
    if (headerTitle) headerTitle.textContent = t('appName', lang);

    const headerSubtitle = document.querySelector('.text-xs.text-slate-500.mt-1');
    if (headerSubtitle) headerSubtitle.textContent = t('mobileControlCenter', lang);

    // Input placeholder
    const keyboardInput = document.getElementById('keyboard-input');
    if (keyboardInput) keyboardInput.placeholder = t('touchHereToType', lang);

    // Tabs
    const keyboardTab = document.querySelector('[data-target="view-keyboard"] .tab-label');
    if (keyboardTab) keyboardTab.textContent = t('keyboard', lang);

    const clipboardTab = document.querySelector('[data-target="view-clipboard"] .tab-label');
    if (clipboardTab) clipboardTab.textContent = t('clipboard', lang);

    // Mouse control toggle
    const mouseToggleSpan = document.querySelector('#mouse-panel-toggle span.font-medium');
    if (mouseToggleSpan) mouseToggleSpan.textContent = t('mouseControl', lang);

    // More keys toggle
    const moreKeysSpan = document.querySelector('#more-keys-toggle span.font-medium');
    if (moreKeysSpan) moreKeysSpan.textContent = t('otherKeys', lang);

    // Clipboard header
    const clipboardTitle = document.querySelector('#view-clipboard .text-lg.font-semibold');
    if (clipboardTitle) clipboardTitle.textContent = t('clipboardManagement', lang);

    const clipboardSubtitle = document.querySelector('#view-clipboard .text-xs.text-slate-500');
    if (clipboardSubtitle) clipboardSubtitle.textContent = t('twoWaySync', lang);

    // Toggle label
    const toggleLabel = document.getElementById('toggle-label');
    if (toggleLabel) {
        const isOn = document.getElementById('clipboard-toggle')?.classList.contains('active');
        toggleLabel.textContent = isOn ? t('on', lang) : t('off', lang);
    }

    // Text input
    const clipboardTextInput = document.getElementById('clipboard-text-input');
    if (clipboardTextInput) clipboardTextInput.placeholder = t('addTextOrPaste', lang);

    // File upload
    const fileDropText = document.querySelector('.file-upload-area .text-sm.text-slate-400');
    if (fileDropText) fileDropText.textContent = t('tapToUploadFile', lang);

    const fileDropHint = document.querySelector('.file-upload-area .text-xs.text-slate-500');
    if (fileDropHint) fileDropHint.textContent = t('imagesPdfEtc', lang);

    // Legend
    const legendItems = document.querySelectorAll('.legend .flex.items-center.gap-2 span');
    if (legendItems.length >= 2) {
        legendItems[0].textContent = t('fromPhone', lang);
        legendItems[1].textContent = t('fromPC', lang);
    }

    // Empty state
    const emptyText = document.querySelector('#clipboard-empty p');
    if (emptyText) emptyText.textContent = t('noItemsYet', lang);

    const emptyHint = document.querySelector('#clipboard-empty .text-xs.mt-1');
    if (emptyHint) emptyHint.textContent = t('addTextOrFile', lang);

    // Clear all button
    const clearAllBtn = document.getElementById('clear-all-clipboard');
    if (clearAllBtn) clearAllBtn.textContent = t('clearAll', lang);

    // Popup
    const popupTitle = document.querySelector('.popup-title');
    if (popupTitle) popupTitle.textContent = t('sharedContent', lang);

    const popupCopyBtn = document.querySelector('.popup-copy-btn span');
    if (popupCopyBtn) popupCopyBtn.textContent = t('copy', lang);

    // Quick actions
    const actionLabels = {
        'select-all': t('selectAll', lang),
        'copy': t('copy', lang),
        'paste': t('paste', lang),
        'cut': t('cut', lang),
        'undo': t('undo', lang),
        'redo': t('redo', lang)
    };

    document.querySelectorAll('.extra-key-btn-compact').forEach(btn => {
        const action = btn.dataset.action;
        const span = btn.querySelector('span');
        if (span && actionLabels[action]) {
            span.textContent = actionLabels[action];
        }
    });
}

export default { t, setLanguage, getLanguage, getSupportedLanguages, updatePageContent };
